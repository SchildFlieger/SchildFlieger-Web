<!DOCTYPE html>
<html>
  <head>
    <title>Like Test</title>
    <style>
      .like-button {
        background: #333;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 20px;
        cursor: pointer;
        margin: 10px;
      }

      .like-button.liked {
        color: red;
      }

      @keyframes likePulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.3);
        }
        100% {
          transform: scale(1);
        }
      }

      .like-button.liked-animation {
        animation: likePulse 0.5s ease;
      }
    </style>
  </head>
  <body>
    <h1>Like Test Page</h1>
    <button class="like-button" data-filename="test.mp4">
      <span class="heart">❤️</span> <span class="like-count">0</span>
    </button>
    <div id="result"></div>
    <button onclick="testFetch()">Test Fetch</button>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        console.log("DOM loaded");

        // Add event listener to like button
        const likeButton = document.querySelector(".like-button");
        if (likeButton) {
          console.log("Like button found");
          likeButton.addEventListener("click", function () {
            console.log("Like button clicked");
            likeMedia("test.mp4", this);
          });
        } else {
          console.log("Like button not found");
        }
      });

      function likeMedia(filename, button) {
        console.log("Liking media:", filename);

        // Update UI immediately for feedback
        const likeCountElement = button.querySelector(".like-count");
        if (likeCountElement) {
          let currentCount = parseInt(likeCountElement.textContent) || 0;
          likeCountElement.textContent = currentCount + 1;
        }

        // Add animation class
        button.classList.add("liked");
        button.classList.add("liked-animation");
        setTimeout(() => {
          button.classList.remove("liked-animation");
        }, 500);

        // Update result div
        document.getElementById("result").innerHTML =
          "Liked " +
          filename +
          "! Count: " +
          (parseInt(likeCountElement.textContent) || 0);
      }

      function testFetch() {
        console.log("Testing fetch...");
        document.getElementById("result").innerHTML = "Fetch test started...";

        // This would be the actual fetch call
        // For now, just simulate
        setTimeout(() => {
          document.getElementById("result").innerHTML =
            "Fetch test completed (simulated)";
        }, 1000);
      }
    </script>
  </body>
</html>
